generate_single_include:
    image: registry.gitlab.akhcheck.ru/artiom.khafizov/unittester
    tags:
        - common
    artifacts:
            paths:
                - single-include/UTest/UTest.hpp
            when: on_success
    script:
        - cmake -S . -B build && cd build && make
        - git config user.email "khafizov.ar@phystech.edu"
        - git config user.name "ci-bot"
        - if [ $(git remote -v | grep gitlab_origin | wc -l) -eq 0 ]; then git remote add gitlab_origin https://artiom.khafizov:oauth2:glpat-hjgWg37saysQC3drx3pu@gitlab.akhcheck.ru/artiom.khafizov/unittester.git; fi
        - cd ..
        - pwd
        - ls -a
        - git add single-include/
        - git commit -m "generated single-include by ci-bot"
        - git push gitlab_origin HEAD:main -o ci.skip # prevent triggering pipeline again
    